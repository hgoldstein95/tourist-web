(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{138:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"c",function(){return i}),r.d(t,"e",function(){return c}),r.d(t,"b",function(){return u}),r.d(t,"d",function(){return s});var n=r(283),a=r(102);function o(e){return e.repositories instanceof Map&&"string"===typeof e.title&&"string"===typeof e.description&&Array.isArray(e.stops)&&e.stops.every(function(e){return function(e){return"string"===typeof e.body&&"number"===typeof e.line&&"string"===typeof e.relPath&&"string"===typeof e.repository&&"string"===typeof e.title}(e)})}function i(e){var t;try{t=JSON.parse(e)}catch(r){return"Failed to parse file as JSON."}try{if("object"!=typeof t.repositories)throw new Error;if(t.repositories=new Map(t.repositories.map(function(e){return[e.repository,e.commit]})),!o(t))throw new Error}catch(r){return"Could not parse file as tour."}return t}function c(e){var t={};return Array.from(e.repositories.entries()).forEach(function(e){var r=Object(a.a)(e,2),n=r[0],o=r[1];t[n]=o}),JSON.stringify(Object(n.a)({},e,{repositories:t}))}function u(e){var t;try{t=JSON.parse(e)}catch(r){return"Failed to parse file as JSON."}return"object"!=typeof t?"Could not parse object as index.":new Map(Object.entries(t))}function s(e){var t={};return Array.from(e.entries()).forEach(function(e){var r=Object(a.a)(e,2),n=r[0],o=r[1];t[n]=o}),JSON.stringify(t)}},220:function(e,t,r){"use strict";r.d(t,"a",function(){return p});var n=r(2),a=r.n(n),o=r(519),i=r(515),c=r(285),u=r(516),s=r(513),l=Object(s.a)(function(e){return{bgErr:{backgroundColor:e.palette.error.dark},errIcon:{fontSize:20,opacity:.9,marginRight:10}}}),p=function(e){var t=l(e);return a.a.createElement(o.a,{open:e.show,anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:6e3},a.a.createElement(i.a,{message:a.a.createElement("span",null,a.a.createElement(c.a,{className:t.errIcon},"error"),e.message||"An Error Occurred"),action:[a.a.createElement(u.a,{key:"close",color:"inherit",onClick:e.hideError},a.a.createElement(c.a,null,"close"))],className:t.bgErr}))}},275:function(e,t,r){"use strict";(function(e){r.d(t,"a",function(){return j});var n=r(134),a=r.n(n),o=r(102),i=r(197),c=r(2),u=r.n(c),s=r(286),l=r(249),p=r(517),m=r(220),f=r(138),d=r(277),g=r.n(d);function h(e){return b.apply(this,arguments)}function b(){return(b=Object(i.a)(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new FileReader,e.abrupt("return",new Promise(function(e,n){r.readAsText(t),r.onload=function(t){var r=t.target.result;e(r)}}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function y(e){return v.apply(this,arguments)}function v(){return(v=Object(i.a)(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new FileReader,e.abrupt("return",new Promise(function(e,n){r.readAsArrayBuffer(t),r.onload=function(t){var r=t.target.result;e(r)}}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function E(e){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(a.a.mark(function t(r){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],t.abrupt("return",new Promise(function(t,a){r.on("data",function(e){n.push(e)}),r.on("error",a),r.on("end",function(){return t(e.concat(n).toString("utf8"))})}));case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}function w(e){return k.apply(this,arguments)}function k(){return(k=Object(i.a)(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Map,e.abrupt("return",new Promise(function(e,n){g.a.fromBuffer(t,{lazyEntries:!0},function(t,a){!t&&a?(a.readEntry(),a.on("entry",function(e){/\/$/.test(e.fileName)?a.readEntry():a.openReadStream(e,function(t,o){if(t||!o)return n(t||new Error("Read stream is null."));E(o).then(function(t){r.set(e.fileName,t),a.readEntry()})})}),a.on("end",function(){a.close(),e(r)})):n(t||new Error("Zip file is null"))})}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var j=function(t){var r=Object(c.useState)(null),n=Object(o.a)(r,2),d=n[0],g=n[1];function b(){return(b=Object(i.a)(a.a.mark(function r(n){var o,i,c,u,s,l,p;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(o=n.target.files[0]).name.endsWith(".tour.pkg")){r.next=20;break}return r.next=4,y(o);case 4:return i=r.sent,r.next=7,w(e.from(i));case 7:if(c=r.sent,u=c.get("tour.tour")){r.next=12;break}return g("No file called 'tour.tour' in package."),r.abrupt("return");case 12:if(c.delete("tour.tour"),"string"!==typeof(s=Object(f.c)(u))){r.next=17;break}return g(s),r.abrupt("return");case 17:t.route({kind:"ViewTour",tour:s,context:{kind:"LocalPackage",content:c}}),r.next=33;break;case 20:if(!o.name.endsWith(".tour")){r.next=32;break}return r.next=23,h(o);case 23:if(l=r.sent,"string"!==typeof(p=Object(f.c)(l))){r.next=28;break}return g(p),r.abrupt("return");case 28:localStorage.setItem("savedTour",Object(f.e)(p)),t.route({kind:"CreateIndex",tour:p}),r.next=33;break;case 32:g("Please upload a file with extension '.tour' or '.tour.pkg'.");case 33:case"end":return r.stop()}},r)}))).apply(this,arguments)}return u.a.createElement("div",null,u.a.createElement(s.a,{container:!0,justify:"center",alignItems:"center",style:{marginTop:"10%"}},u.a.createElement(s.a,{item:!0,xs:7,style:{textAlign:"center"}},u.a.createElement(l.a,{variant:"h3",style:{marginBottom:20}},"Welcome to Tourist!"),u.a.createElement("p",null,"Tourist is a new approach to documentation that allows programmers to explain low-level technical details of a system while simultaneously providing the context of how those details fit into the broader architecture. It lets programmers document code in the same way that they would explain it in person: by walking the consumer step-by-step through the important parts of a codebase."),u.a.createElement(p.a,{style:{marginTop:80},color:"primary",variant:"outlined",component:"label"},"Upload a Tour",u.a.createElement("input",{type:"file",style:{display:"none"},onInput:function(e){return b.apply(this,arguments)}})))),u.a.createElement(m.a,{show:null!==d,hideError:function(){return g(null)},message:d||void 0}))}}).call(this,r(140).Buffer)},291:function(e,t,r){e.exports=r(500)},296:function(e,t,r){},297:function(e,t,r){},316:function(e,t){},318:function(e,t){},500:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),o=r(66),i=r.n(o),c=(r(296),r(102)),u=(r(297),r(275)),s=r(286),l=r(249),p=r(517),m=r(220),f=r(606),d=r(609),g=r(607),h=function(e){var t=e.repository.provider;return a.a.createElement(s.a,{item:!0,xs:12},a.a.createElement(s.a,{container:!0,alignItems:"flex-end"},a.a.createElement(s.a,{item:!0,xs:3},a.a.createElement(l.a,{variant:"h5"},e.repoName)),a.a.createElement(s.a,{item:!0,xs:2},a.a.createElement(f.a,{value:t,onChange:function(t){return r=t.target.value,e.repository.provider=r,void e.onChange(e.repository);var r}},a.a.createElement(d.a,{value:"github"},"GitHub"),a.a.createElement(d.a,{value:"gitlab"},"GitLab"))),a.a.createElement(s.a,{item:!0,xs:"gitlab"!==t?7:5},a.a.createElement(g.a,{style:{width:"100%"},value:e.repository.name,label:e.first&&"gitlab"!==t?"Repository Tag (e.g. noobmaster69/my-repo)":"Repository Tag",onChange:function(t){return r=t.target.value,e.repository.name=r,void e.onChange(e.repository);var r}})),"gitlab"===t&&a.a.createElement(s.a,{item:!0,xs:2},a.a.createElement(g.a,{style:{width:"100%",marginLeft:10},type:"number",value:"gitlab"===e.repository.provider?e.repository.project:0,label:"GitLab Project",onChange:function(t){return r=+t.target.value,void("gitlab"===e.repository.provider&&(e.repository.project=r,e.onChange(e.repository)));var r}}))))},b=r(138),y=function(e){var t=e.page.tour,r=Object(n.useState)(new Map(Array.from(t.repositories.keys()).map(function(e){return[e,{provider:"github",name:""}]}))),o=Object(c.a)(r,2),i=o[0],u=o[1],f=Object(n.useState)(null),d=Object(c.a)(f,2),g=d[0],y=d[1];return a.a.createElement("div",null,a.a.createElement(s.a,{container:!0,style:{marginTop:"10%"},justify:"center",alignItems:"center"},a.a.createElement(s.a,{item:!0,xs:12,md:6},a.a.createElement(s.a,{container:!0},a.a.createElement(s.a,{item:!0,xs:12,style:{marginBottom:30}},a.a.createElement(l.a,{variant:"h4"},t.title)),a.a.createElement(s.a,{item:!0,xs:12},a.a.createElement(s.a,{container:!0},Array.from(t.repositories.keys()).map(function(e,t){return a.a.createElement(h,{repoName:e,repository:i.get(e),onChange:function(t){return function(e,t){var r=new Map(i);r.set(e,t),u(r)}(e,t)},key:e,first:0===t})}))),a.a.createElement(s.a,{item:!0,xs:12,style:{textAlign:"right",marginTop:50}},a.a.createElement(p.a,{onClick:function(){Array.from(i.entries()).some(function(e){var t=Object(c.a)(e,2),r=(t[0],t[1]);return""===r.name||"gitlab"===r.provider&&!r.project})?y("You must set a mapping for every repository."):(localStorage.setItem("savedIndex",Object(b.d)(i)),e.route({kind:"ViewTour",tour:e.page.tour,context:{kind:"ResolveWithIndex",index:i}}))},color:"primary",variant:"outlined"},"Start Tour"))))),a.a.createElement(m.a,{show:null!==g,hideError:function(){return y(null)},message:g||void 0}))},v=r(516),E=r(285),x=r(603),w=r(279),k=r.n(w),j=r(280),O=r(281),T=r.n(O),S=r(513),I=Object(S.a)(function(e){return{focusLine:{borderTop:"1px solid black",borderBottom:"1px solid black"},focusLineDeco:{width:"5px !important",marginLeft:3,backgroundColor:e.palette.primary.main}}}),C=function(e){var t=I(),r=Object(n.useRef)(null);return Object(n.useEffect)(function(){if(r.current){var n=r.current.editor;if(n){var a=n.getModel();a&&(a.setValue(e.code),n.revealLineInCenter(e.focusLine),n.deltaDecorations([],[{range:{startLineNumber:e.focusLine,startColumn:0,endLineNumber:e.focusLine,endColumn:0},options:{isWholeLine:!0,className:t.focusLine,linesDecorationsClassName:t.focusLineDeco}}]))}}},[r,e,t]),a.a.createElement(T.a,{ref:r,height:"80vh",language:"typescript",options:{readOnly:!0,minimap:{enabled:!1}}})};var L=function(e){var t=function(e,t,r,n){switch(e.provider){case"github":return"https://github.com/"+e.name+"/blob/"+r+"/"+t+"#L"+n;case"gitlab":return"https://gitlab.com/"+e.name+"/blob/"+r+"/"+t+"#L"+n}}(e.repository,e.path,e.commit,e.line);return a.a.createElement(x.a,{href:t,style:{float:"right"}},"View on ","github"===e.repository.provider?"GitHub":"GitLab")},N=function(e){var t=e.stop,r="ResolveWithIndex"===e.context.kind?e.context.index.get(e.stop.repository):null,n=new j.Converter;n.setFlavor("github");var o=n.makeHtml(t.body);return a.a.createElement("div",null,a.a.createElement(l.a,{variant:"h3"},t.title),a.a.createElement("div",{dangerouslySetInnerHTML:{__html:o}}),r&&a.a.createElement(L,{repository:r,path:t.relPath,commit:e.tour.repositories.get(t.repository)||"master",line:t.line}))},A=function(e){var t=Object(n.useState)("Loading..."),r=Object(c.a)(t,2),o=r[0],i=r[1];return Object(n.useEffect)(function(){switch(e.context.kind){case"LocalPackage":i(e.context.content.get(e.stop.repository+"/"+e.stop.relPath)||"No content available in package.");break;case"ResolveWithIndex":var t=e.context.index.get(e.stop.repository);t?k.a.get(function(e,t,r){switch(e.provider){case"github":return"https://raw.githubusercontent.com/"+e.name+"/"+r+"/"+t;case"gitlab":return"https://gitlab.com/api/v4/projects/"+e.project+"/repository/files/"+t+"/raw?ref="+r}}(t,e.stop.relPath,e.tour.repositories.get(e.stop.repository)||"master")).then(function(e){i(e.data)}):i("Repository was not mapped in the index.")}},[e.stop,e.tour,e.context]),a.a.createElement(C,{code:o,focusLine:e.stop.line})},R=function(e){return a.a.createElement(s.a,{container:!0},a.a.createElement(s.a,{item:!0,md:4,xs:12,style:{paddingRight:60}},a.a.createElement(N,{context:e.context,tour:e.tour,stop:e.stop})),a.a.createElement(s.a,{item:!0,md:8,xs:12},a.a.createElement(A,{context:e.context,tour:e.tour,stop:e.stop})))},P=function(e){return a.a.createElement(s.a,{container:!0},a.a.createElement(s.a,{item:!0,xs:12,style:{textAlign:"center"}},a.a.createElement(l.a,{variant:"h3"},e.tour.title)),a.a.createElement(s.a,{item:!0,xs:12,style:{textAlign:"center"}},a.a.createElement("p",{style:{marginTop:50}},e.tour.description)))},M=function(e){var t=e.page.tour.stops,r=Object(n.useState)(-1),o=Object(c.a)(r,2),i=o[0],u=o[1];function l(e){u(e),localStorage.setItem("stopNumber",e.toString())}var p=i<t.length-1,m=i>-1;return Object(n.useEffect)(function(){var e=localStorage.getItem("stopNumber");e&&u(+e)},[]),a.a.createElement(s.a,{container:!0,style:{paddingTop:20,paddingLeft:60,paddingRight:60}},a.a.createElement(s.a,{item:!0,xs:12,style:{marginBottom:20}},a.a.createElement(v.a,{onClick:function(){l(Math.max(-1,i-1))},disabled:!m},a.a.createElement(E.a,null,"arrow_back")),a.a.createElement(v.a,{onClick:function(){l(Math.min(t.length,i+1))},disabled:!p,style:{float:"right"}},a.a.createElement(E.a,null,"arrow_forward"))),a.a.createElement(s.a,{item:!0,xs:12},-1===i?a.a.createElement(P,{tour:e.page.tour}):a.a.createElement(R,{context:e.page.context,tour:e.page.tour,stop:t[i]})))},W=r(604),B=r(605),J=function(e){var t,r=Object(n.useState)(e.page||{kind:"UploadTour"}),o=Object(c.a)(r,2),i=o[0],s=o[1];switch(Object(n.useEffect)(function(){if(!e.page){var t=function(){var e=localStorage.getItem("savedTour");if(!e)return null;var t=Object(b.c)(e);return Object(b.a)(t)?t:null}(),r=function(){var e=localStorage.getItem("savedIndex");if(!e)return null;var t=Object(b.b)(e);return"string"===typeof t?null:t}();t&&s(r?{kind:"ViewTour",tour:t,context:{kind:"ResolveWithIndex",index:r}}:{kind:"CreateIndex",tour:t})}},[e.page]),i.kind){case"UploadTour":t=a.a.createElement(u.a,{page:i,route:s});break;case"CreateIndex":t=a.a.createElement(y,{page:i,route:s});break;case"ViewTour":t=a.a.createElement(M,{page:i,route:s})}return a.a.createElement("div",{className:"App"},a.a.createElement(W.a,{position:"static"},a.a.createElement(B.a,null,"UploadTour"!==i.kind&&a.a.createElement(p.a,{onClick:function(){localStorage.clear(),s({kind:"UploadTour"})}},a.a.createElement(E.a,{style:{marginRight:20}},"refresh"),"Start Over"))),t)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=r(282),D=r(610),F=Object(V.a)({palette:{primary:{light:"#67daff",main:"#03a9f4",dark:"#007ac1",contrastText:"#fff"},secondary:{light:"#80e27e",main:"#4caf50",dark:"#087f23",contrastText:"#000"}}});i.a.render(a.a.createElement(D.a,{theme:F},a.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[291,2,3]]]);
//# sourceMappingURL=main.02d07c00.chunk.js.map