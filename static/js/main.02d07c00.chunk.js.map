{"version":3,"sources":["model.ts","components/ErrorSnackbar.tsx","pages/UploadTour.tsx","components/WebRepositoryEditor.tsx","pages/CreateIndex.tsx","components/CodeWindow.tsx","components/StopView.tsx","pages/ViewTour.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["isTour","tour","repositories","Map","title","description","Array","isArray","stops","every","stop","body","line","relPath","repository","isStop","parseTour","json","obj","JSON","parse","_","Error","map","repo","commit","writeTour","repos","from","entries","forEach","_ref","_ref2","Object","_home_harrison_Projects_tourist_web_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","k","v","stringify","_home_harrison_Projects_tourist_web_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","parseIndex","writeIndex","index","_ref3","_ref4","__webpack_require__","d","__webpack_exports__","ErrorSnackbar","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_material_ui_core__WEBPACK_IMPORTED_MODULE_1__","_material_ui_core__WEBPACK_IMPORTED_MODULE_2__","_material_ui_core__WEBPACK_IMPORTED_MODULE_3__","_material_ui_core__WEBPACK_IMPORTED_MODULE_4__","_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5__","useStyles","makeStyles","theme","bgErr","backgroundColor","palette","error","dark","errIcon","fontSize","opacity","marginRight","props","classes","a","createElement","open","show","anchorOrigin","vertical","horizontal","autoHideDuration","message","className","action","key","color","onClick","hideError","readFileAsText","_callee2","f","fr","_home_harrison_Projects_tourist_web_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","wrap","_context2","prev","next","FileReader","abrupt","Promise","resolve","_reject","readAsText","onload","loaded","text","target","result","readFileAsBuffer","_callee3","_context3","readAsArrayBuffer","readStreamToString","_callee4","stream","chunks","_context4","reject","on","chunk","push","Buffer","concat","toString","unzipContents","_callee5","b","_context5","yauzl","fromBuffer","lazyEntries","err","zipFile","readEntry","entry","test","fileName","openReadStream","readStream","then","val","set","close","UploadTour","_useState","useState","_useState2","setError","_uploadTour","_home_harrison_Projects_tourist_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","mark","_callee","e","file","buffer","_json","_tour","_context","files","name","endsWith","sent","get","delete","route","kind","context","content","localStorage","setItem","apply","this","arguments","react__WEBPACK_IMPORTED_MODULE_3___default","container","justify","alignItems","style","marginTop","item","xs","textAlign","_material_ui_core__WEBPACK_IMPORTED_MODULE_5__","variant","marginBottom","_material_ui_core__WEBPACK_IMPORTED_MODULE_6__","component","type","display","onInput","_x5","_components_ErrorSnackbar__WEBPACK_IMPORTED_MODULE_7__","undefined","WebRepositoryEditor","provider","react_default","Grid","Typography","repoName","Select","value","onChange","MenuItem","TextField","width","label","first","marginLeft","project","CreateIndex","page","keys","slicedToArray","webRepositories","setWebRepositories","_useState3","_useState4","md","i","WebRepositoryEditor_WebRepositoryEditor","wr","wrs","setWebRepository","Button","some","webRepo","focusLine","borderTop","borderBottom","focusLineDeco","primary","main","CodeWindow","monaco","useRef","useEffect","current","editor","model","getModel","setValue","code","revealLineInCenter","deltaDecorations","range","startLineNumber","startColumn","endLineNumber","endColumn","options","isWholeLine","linesDecorationsClassName","lib_default","ref","height","language","readOnly","minimap","enabled","RepositoryLink","url","path","buildCodeLinkURL","Link","href","float","StopProse","converter","Converter","setFlavor","htmlBody","makeHtml","dangerouslySetInnerHTML","__html","StopView_RepositoryLink","StopCode","setCode","axios","buildCodeSourceURL","res","data","CodeWindow_CodeWindow","StopView","paddingRight","StopView_StopProse","StopView_StopCode","TitlePage","ViewTour","setIndex","setAndStoreIndex","idx","canGoForward","length","canGoBack","getItem","paddingTop","paddingLeft","IconButton","Math","max","disabled","Icon","min","ViewTour_TitlePage","StopView_StopView","App","setPage","tourString","getSavedTour","indexString","getSavedIndex","CreateIndex_CreateIndex","ViewTour_ViewTour","AppBar","position","Toolbar","clear","Boolean","window","location","hostname","match","createMuiTheme","light","contrastText","secondary","ReactDOM","render","MuiThemeProvider","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.02d07c00.chunk.js","sourcesContent":["export type WebRepository =\n  | {\n      provider: \"github\";\n      name: string;\n    }\n  | {\n      provider: \"gitlab\";\n      name: string;\n      project: number;\n    };\n\nexport type Index = Map<Repository, WebRepository>;\n\nexport type Commit = string;\nexport type Repository = string;\n\nexport interface Tour {\n  repositories: Map<Repository, Commit>;\n  stops: Stop[];\n  title: string;\n  description: string;\n}\n\nexport function isTour(tour: any): tour is Tour {\n  return (\n    tour.repositories instanceof Map &&\n    typeof tour.title === \"string\" &&\n    typeof tour.description === \"string\" &&\n    Array.isArray(tour.stops) &&\n    tour.stops.every((stop: any) => isStop(stop))\n  );\n}\n\nexport interface Stop {\n  body: string;\n  line: number;\n  relPath: string;\n  repository: string;\n  title: string;\n}\n\nexport function isStop(stop: any): stop is Stop {\n  return (\n    typeof stop.body === \"string\" &&\n    typeof stop.line === \"number\" &&\n    typeof stop.relPath === \"string\" &&\n    typeof stop.repository === \"string\" &&\n    typeof stop.title === \"string\"\n  );\n}\n\nexport function parseTour(json: string): Tour | string {\n  let obj: any;\n  try {\n    obj = JSON.parse(json);\n  } catch (_) {\n    return \"Failed to parse file as JSON.\";\n  }\n  try {\n    if (typeof obj.repositories != \"object\") throw new Error();\n    obj.repositories = new Map(\n      (obj.repositories as any[]).map((repo: any) => [\n        repo.repository,\n        repo.commit\n      ])\n    );\n    if (!isTour(obj)) throw new Error();\n  } catch (_) {\n    return \"Could not parse file as tour.\";\n  }\n  return obj;\n}\n\nexport function writeTour(tour: Tour): string {\n  const repos = {} as any;\n  Array.from(tour.repositories.entries()).forEach(([k, v]) => {\n    repos[k] = v;\n  });\n  return JSON.stringify({\n    ...tour,\n    repositories: repos\n  });\n}\n\nexport function parseIndex(json: string): Index | string {\n  let obj: any;\n  try {\n    obj = JSON.parse(json);\n  } catch (_) {\n    return \"Failed to parse file as JSON.\";\n  }\n  const err = \"Could not parse object as index.\";\n  if (typeof obj != \"object\") {\n    return err;\n  }\n  return new Map(Object.entries(obj));\n}\n\nexport function writeIndex(index: Index): string {\n  const obj = {} as any;\n  Array.from(index.entries()).forEach(([k, v]) => {\n    obj[k] = v;\n  });\n  return JSON.stringify(obj);\n}\n","import React from \"react\";\nimport { Snackbar, SnackbarContent, IconButton, Icon } from \"@material-ui/core\";\nimport { Theme, makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme: Theme) => {\n  return {\n    bgErr: {\n      backgroundColor: theme.palette.error.dark\n    },\n    errIcon: {\n      fontSize: 20,\n      opacity: 0.9,\n      marginRight: 10\n    }\n  };\n});\n\nexport const ErrorSnackbar: React.FC<{\n  show: boolean;\n  message?: string;\n  hideError: () => void;\n}> = props => {\n  const classes = useStyles(props);\n\n  return (\n    <Snackbar\n      open={props.show}\n      anchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\n      autoHideDuration={6000}\n    >\n      <SnackbarContent\n        message={\n          <span>\n            <Icon className={classes.errIcon}>error</Icon>\n            {props.message || \"An Error Occurred\"}\n          </span>\n        }\n        action={[\n          <IconButton key=\"close\" color=\"inherit\" onClick={props.hideError}>\n            <Icon>close</Icon>\n          </IconButton>\n        ]}\n        className={classes.bgErr}\n      />\n    </Snackbar>\n  );\n};\n","import React, { useState } from \"react\";\nimport { UploadTourPage, Page } from \"../pageTypes\";\nimport { Typography, Grid, Button } from \"@material-ui/core\";\nimport { ErrorSnackbar } from \"../components/ErrorSnackbar\";\nimport { parseTour, writeTour } from \"../model\";\nimport yauzl from \"yauzl\";\n\nasync function readFileAsText(f: File): Promise<string> {\n  const fr = new FileReader();\n  return new Promise((resolve, _reject) => {\n    fr.readAsText(f);\n    fr.onload = loaded => {\n      const text = (loaded.target as any).result;\n      resolve(text);\n    };\n  });\n}\n\nasync function readFileAsBuffer(f: File): Promise<ArrayBuffer> {\n  const fr = new FileReader();\n  return new Promise((resolve, _reject) => {\n    fr.readAsArrayBuffer(f);\n    fr.onload = loaded => {\n      const text = (loaded.target as any).result;\n      resolve(text);\n    };\n  });\n}\n\nasync function readStreamToString(stream: any): Promise<string> {\n  const chunks: Buffer[] = [];\n  return new Promise((resolve, reject) => {\n    stream.on(\"data\", (chunk: Buffer) => {\n      chunks.push(chunk);\n    });\n    stream.on(\"error\", reject);\n    stream.on(\"end\", () => resolve(Buffer.concat(chunks).toString(\"utf8\")));\n  });\n}\n\nasync function unzipContents(b: Buffer): Promise<Map<string, string>> {\n  let entries = new Map<string, string>();\n  return new Promise((resolve, reject) => {\n    yauzl.fromBuffer(b, { lazyEntries: true }, (err, zipFile) => {\n      if (err || !zipFile) {\n        reject(err || new Error(\"Zip file is null\"));\n        return;\n      }\n      zipFile.readEntry();\n      zipFile.on(\"entry\", (entry: yauzl.Entry) => {\n        if (!/\\/$/.test(entry.fileName)) {\n          // Normal file\n          zipFile.openReadStream(entry, (err, readStream) => {\n            if (err || !readStream) {\n              return reject(err || new Error(\"Read stream is null.\"));\n            }\n            readStreamToString(readStream).then(val => {\n              entries.set(entry.fileName, val);\n              zipFile.readEntry();\n            });\n          });\n        } else {\n          zipFile.readEntry();\n        }\n      });\n      zipFile.on(\"end\", () => {\n        zipFile.close();\n        resolve(entries);\n      });\n    });\n  });\n}\n\nexport const UploadTour: React.FC<{\n  page: UploadTourPage;\n  route: (s: Page) => void;\n}> = props => {\n  const [error, setError] = useState(null as string | null);\n\n  async function uploadTour(e: React.ChangeEvent<HTMLInputElement>) {\n    const file = e.target.files![0];\n\n    if (file.name.endsWith(\".tour.pkg\")) {\n      const buffer = await readFileAsBuffer(file);\n      const entries = await unzipContents(Buffer.from(buffer));\n      const json = entries.get(\"tour.tour\");\n      if (!json) {\n        setError(\"No file called 'tour.tour' in package.\");\n        return;\n      }\n      entries.delete(\"tour.tour\");\n      const tour = parseTour(json);\n      if (typeof tour === \"string\") {\n        setError(tour);\n        return;\n      }\n      // We don't save to local storage here because the data could potentially\n      // be large\n      props.route({\n        kind: \"ViewTour\",\n        tour,\n        context: { kind: \"LocalPackage\", content: entries }\n      });\n    } else if (file.name.endsWith(\".tour\")) {\n      const json = await readFileAsText(file);\n      const tour = parseTour(json);\n      if (typeof tour === \"string\") {\n        setError(tour);\n        return;\n      }\n      localStorage.setItem(\"savedTour\", writeTour(tour));\n      props.route({\n        kind: \"CreateIndex\",\n        tour\n      });\n    } else {\n      setError(\"Please upload a file with extension '.tour' or '.tour.pkg'.\");\n    }\n  }\n\n  return (\n    <div>\n      <Grid\n        container\n        justify=\"center\"\n        alignItems=\"center\"\n        style={{ marginTop: \"10%\" }}\n      >\n        <Grid item xs={7} style={{ textAlign: \"center\" }}>\n          <Typography variant=\"h3\" style={{ marginBottom: 20 }}>\n            Welcome to Tourist!\n          </Typography>\n          <p>\n            Tourist is a new approach to documentation that allows programmers\n            to explain low-level technical details of a system while\n            simultaneously providing the context of how those details fit into\n            the broader architecture. It lets programmers document code in the\n            same way that they would explain it in person: by walking the\n            consumer step-by-step through the important parts of a codebase.\n          </p>\n          <Button\n            style={{ marginTop: 80 }}\n            color=\"primary\"\n            variant=\"outlined\"\n            component=\"label\"\n          >\n            Upload a Tour\n            <input\n              type=\"file\"\n              style={{ display: \"none\" }}\n              onInput={uploadTour}\n            />\n          </Button>\n        </Grid>\n      </Grid>\n      <ErrorSnackbar\n        show={error !== null}\n        hideError={() => setError(null)}\n        message={error || undefined}\n      />\n    </div>\n  );\n};\n","import React from \"react\";\nimport { WebRepository } from \"../model\";\nimport {\n  Grid,\n  Typography,\n  TextField,\n  Select,\n  MenuItem\n} from \"@material-ui/core\";\n\nexport const WebRepositoryEditor: React.FC<{\n  repoName: string;\n  repository: WebRepository;\n  onChange: (wr: WebRepository) => void;\n  first?: boolean;\n}> = props => {\n  const provider = props.repository.provider;\n\n  function handleNameChange(name: string) {\n    props.repository.name = name;\n    props.onChange(props.repository);\n  }\n\n  function handleProviderChange(provider: \"github\" | \"gitlab\") {\n    props.repository.provider = provider;\n    props.onChange(props.repository);\n  }\n\n  function handleProjectChange(project: number) {\n    if (props.repository.provider === \"gitlab\") {\n      props.repository.project = project;\n      props.onChange(props.repository);\n    }\n  }\n\n  return (\n    <Grid item xs={12}>\n      <Grid container alignItems=\"flex-end\">\n        <Grid item xs={3}>\n          <Typography variant=\"h5\">{props.repoName}</Typography>\n        </Grid>\n        <Grid item xs={2}>\n          <Select\n            value={provider}\n            onChange={e =>\n              handleProviderChange(e.target.value as \"github\" | \"gitlab\")\n            }\n          >\n            <MenuItem value=\"github\">GitHub</MenuItem>\n            <MenuItem value=\"gitlab\">GitLab</MenuItem>\n          </Select>\n        </Grid>\n        <Grid item xs={provider !== \"gitlab\" ? 7 : 5}>\n          <TextField\n            style={{ width: \"100%\" }}\n            value={props.repository.name}\n            label={\n              props.first && provider !== \"gitlab\"\n                ? \"Repository Tag (e.g. noobmaster69/my-repo)\"\n                : \"Repository Tag\"\n            }\n            onChange={e => handleNameChange(e.target.value)}\n          />\n        </Grid>\n        {provider === \"gitlab\" && (\n          <Grid item xs={2}>\n            <TextField\n              style={{ width: \"100%\", marginLeft: 10 }}\n              type=\"number\"\n              value={\n                props.repository.provider === \"gitlab\"\n                  ? props.repository.project\n                  : 0\n              }\n              label=\"GitLab Project\"\n              onChange={e => handleProjectChange(+e.target.value)}\n            />\n          </Grid>\n        )}\n      </Grid>\n    </Grid>\n  );\n};\n","import { Button, Grid, Typography } from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport { ErrorSnackbar } from \"../components/ErrorSnackbar\";\nimport { WebRepositoryEditor } from \"../components/WebRepositoryEditor\";\nimport { WebRepository, writeIndex } from \"../model\";\nimport { CreateIndexPage, Page } from \"../pageTypes\";\n\nexport const CreateIndex: React.FC<{\n  page: CreateIndexPage;\n  route: (s: Page) => void;\n}> = props => {\n  const tour = props.page.tour;\n  const [webRepositories, setWebRepositories] = useState(\n    new Map<string, WebRepository>(\n      Array.from(tour.repositories.keys()).map(k => [\n        k,\n        { provider: \"github\", name: \"\" }\n      ])\n    )\n  );\n  const [error, setError] = useState(null as string | null);\n\n  function setWebRepository(repository: string, wr: WebRepository) {\n    const wrs = new Map(webRepositories);\n    wrs.set(repository, wr);\n    setWebRepositories(wrs);\n  }\n\n  function finalize() {\n    if (\n      Array.from(webRepositories.entries()).some(\n        ([_, webRepo]) =>\n          webRepo.name === \"\" ||\n          (webRepo.provider === \"gitlab\" && !webRepo.project)\n      )\n    ) {\n      setError(\"You must set a mapping for every repository.\");\n      return;\n    }\n    localStorage.setItem(\"savedIndex\", writeIndex(webRepositories));\n    props.route({\n      kind: \"ViewTour\",\n      tour: props.page.tour,\n      context: { kind: \"ResolveWithIndex\", index: webRepositories }\n    });\n  }\n\n  return (\n    <div>\n      <Grid\n        container\n        style={{ marginTop: \"10%\" }}\n        justify=\"center\"\n        alignItems=\"center\"\n      >\n        <Grid item xs={12} md={6}>\n          <Grid container>\n            <Grid item xs={12} style={{ marginBottom: 30 }}>\n              <Typography variant=\"h4\">{tour.title}</Typography>\n            </Grid>\n            <Grid item xs={12}>\n              <Grid container>\n                {Array.from(tour.repositories.keys()).map((repository, i) => (\n                  <WebRepositoryEditor\n                    repoName={repository}\n                    repository={webRepositories.get(repository)!}\n                    onChange={wr => setWebRepository(repository, wr)}\n                    key={repository}\n                    first={i === 0}\n                  />\n                ))}\n              </Grid>\n            </Grid>\n            <Grid item xs={12} style={{ textAlign: \"right\", marginTop: 50 }}>\n              <Button onClick={finalize} color=\"primary\" variant=\"outlined\">\n                Start Tour\n              </Button>\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n      <ErrorSnackbar\n        show={error !== null}\n        hideError={() => setError(null)}\n        message={error || undefined}\n      />\n    </div>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport MonacoEditor from \"react-monaco-editor\";\nimport { Theme, makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme: Theme) => {\n  return {\n    focusLine: {\n      borderTop: \"1px solid black\",\n      borderBottom: \"1px solid black\"\n    },\n    focusLineDeco: {\n      width: \"5px !important\",\n      marginLeft: 3,\n      backgroundColor: theme.palette.primary.main\n    }\n  };\n});\n\nexport const CodeWindow: React.FC<{\n  code: string;\n  focusLine: number;\n}> = props => {\n  const classes = useStyles();\n  const monaco = useRef(null as MonacoEditor | null);\n\n  useEffect(() => {\n    if (!monaco.current) return;\n    const editor = monaco.current.editor;\n    if (!editor) return;\n    const model = editor.getModel();\n    if (!model) return;\n    model.setValue(props.code);\n    editor.revealLineInCenter(props.focusLine);\n    editor.deltaDecorations(\n      [],\n      [\n        {\n          range: {\n            startLineNumber: props.focusLine,\n            startColumn: 0,\n            endLineNumber: props.focusLine,\n            endColumn: 0\n          },\n          options: {\n            isWholeLine: true,\n            className: classes.focusLine,\n            linesDecorationsClassName: classes.focusLineDeco\n          }\n        }\n      ]\n    );\n  }, [monaco, props, classes]);\n\n  return (\n    <MonacoEditor\n      ref={monaco}\n      height=\"80vh\"\n      language=\"typescript\"\n      options={{\n        readOnly: true,\n        minimap: { enabled: false }\n      }}\n    />\n  );\n};\n","import { Grid, Link, Typography } from \"@material-ui/core\";\nimport axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { Converter } from \"showdown\";\nimport { CodeWindow } from \"../components/CodeWindow\";\nimport { Stop, Tour, WebRepository } from \"../model\";\nimport { Context } from \"../pageTypes\";\n\nfunction buildCodeLinkURL(\n  repository: WebRepository,\n  path: string,\n  commit: string,\n  line: number\n): string {\n  switch (repository.provider) {\n    case \"github\":\n      return (\n        \"https://github.com/\" +\n        repository.name +\n        \"/blob/\" +\n        commit +\n        \"/\" +\n        path +\n        \"#L\" +\n        line\n      );\n    case \"gitlab\":\n      return (\n        \"https://gitlab.com/\" +\n        repository.name +\n        \"/blob/\" +\n        commit +\n        \"/\" +\n        path +\n        \"#L\" +\n        line\n      );\n  }\n}\n\nfunction buildCodeSourceURL(\n  repository: WebRepository,\n  path: string,\n  commit: string\n): string {\n  switch (repository.provider) {\n    case \"github\":\n      return (\n        \"https://raw.githubusercontent.com/\" +\n        repository.name +\n        \"/\" +\n        commit +\n        \"/\" +\n        path\n      );\n    case \"gitlab\":\n      return (\n        \"https://gitlab.com/api/v4/projects/\" +\n        repository.project +\n        \"/repository/files/\" +\n        path +\n        \"/raw?ref=\" +\n        commit\n      );\n  }\n}\n\nexport const RepositoryLink: React.FC<{\n  repository: WebRepository;\n  path: string;\n  commit: string;\n  line: number;\n}> = props => {\n  const url = buildCodeLinkURL(\n    props.repository,\n    props.path,\n    props.commit,\n    props.line\n  );\n  return (\n    <Link href={url} style={{ float: \"right\" }}>\n      View on {props.repository.provider === \"github\" ? \"GitHub\" : \"GitLab\"}\n    </Link>\n  );\n};\n\nexport const StopProse: React.FC<{\n  context: Context;\n  tour: Tour;\n  stop: Stop;\n}> = props => {\n  const stop = props.stop;\n\n  const repository =\n    props.context.kind === \"ResolveWithIndex\"\n      ? props.context.index.get(props.stop.repository)\n      : null;\n\n  const converter = new Converter();\n  converter.setFlavor(\"github\");\n  const htmlBody = converter.makeHtml(stop.body);\n\n  return (\n    <div>\n      <Typography variant=\"h3\">{stop.title}</Typography>\n      <div dangerouslySetInnerHTML={{ __html: htmlBody }} />\n      {repository && (\n        <RepositoryLink\n          repository={repository}\n          path={stop.relPath}\n          commit={props.tour.repositories.get(stop.repository) || \"master\"}\n          line={stop.line}\n        />\n      )}\n    </div>\n  );\n};\n\nexport const StopCode: React.FC<{\n  context: Context;\n  tour: Tour;\n  stop: Stop;\n}> = props => {\n  const [code, setCode] = useState(\"Loading...\");\n\n  useEffect(() => {\n    switch (props.context.kind) {\n      case \"LocalPackage\": {\n        setCode(\n          props.context.content.get(\n            props.stop.repository + \"/\" + props.stop.relPath\n          ) || \"No content available in package.\"\n        );\n        break;\n      }\n      case \"ResolveWithIndex\": {\n        const repository = props.context.index.get(props.stop.repository);\n\n        if (!repository) {\n          setCode(\"Repository was not mapped in the index.\");\n        } else {\n          axios\n            .get(\n              buildCodeSourceURL(\n                repository,\n                props.stop.relPath,\n                props.tour.repositories.get(props.stop.repository) || \"master\"\n              )\n            )\n            .then(res => {\n              setCode(res.data);\n            });\n        }\n        break;\n      }\n    }\n  }, [props.stop, props.tour, props.context]);\n\n  return <CodeWindow code={code} focusLine={props.stop.line} />;\n};\n\nexport const StopView: React.FC<{\n  context: Context;\n  tour: Tour;\n  stop: Stop;\n}> = props => {\n  return (\n    <Grid container>\n      <Grid item md={4} xs={12} style={{ paddingRight: 60 }}>\n        <StopProse\n          context={props.context}\n          tour={props.tour}\n          stop={props.stop}\n        />\n      </Grid>\n      <Grid item md={8} xs={12}>\n        <StopCode context={props.context} tour={props.tour} stop={props.stop} />\n      </Grid>\n    </Grid>\n  );\n};\n","import { Grid, Icon, IconButton, Typography } from \"@material-ui/core\";\nimport React, { useState, useEffect } from \"react\";\nimport { StopView } from \"../components/StopView\";\nimport { Page, ViewTourPage } from \"../pageTypes\";\nimport { Tour } from \"../model\";\n\nexport const TitlePage: React.FC<{\n  tour: Tour;\n}> = props => {\n  return (\n    <Grid container>\n      <Grid item xs={12} style={{ textAlign: \"center\" }}>\n        <Typography variant=\"h3\">{props.tour.title}</Typography>\n      </Grid>\n      <Grid item xs={12} style={{ textAlign: \"center\" }}>\n        <p style={{ marginTop: 50 }}>{props.tour.description}</p>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport const ViewTour: React.FC<{\n  page: ViewTourPage;\n  route: (s: Page) => void;\n}> = props => {\n  const stops = props.page.tour.stops;\n  const [index, setIndex] = useState(-1); // -1 means the title page\n\n  function setAndStoreIndex(idx: number) {\n    setIndex(idx);\n    localStorage.setItem(\"stopNumber\", idx.toString());\n  }\n\n  function incIndex() {\n    setAndStoreIndex(Math.min(stops.length, index + 1));\n  }\n  function decIndex() {\n    setAndStoreIndex(Math.max(-1, index - 1));\n  }\n\n  const canGoForward = index < stops.length - 1;\n  const canGoBack = index > -1;\n\n  useEffect(() => {\n    const idx = localStorage.getItem(\"stopNumber\");\n    if (!idx) return;\n    setIndex(+idx);\n  }, []);\n\n  return (\n    <Grid\n      container\n      style={{ paddingTop: 20, paddingLeft: 60, paddingRight: 60 }}\n    >\n      <Grid item xs={12} style={{ marginBottom: 20 }}>\n        <IconButton onClick={decIndex} disabled={!canGoBack}>\n          <Icon>arrow_back</Icon>\n        </IconButton>\n        <IconButton\n          onClick={incIndex}\n          disabled={!canGoForward}\n          style={{ float: \"right\" }}\n        >\n          <Icon>arrow_forward</Icon>\n        </IconButton>\n      </Grid>\n      <Grid item xs={12}>\n        {index === -1 ? (\n          <TitlePage tour={props.page.tour} />\n        ) : (\n          <StopView\n            context={props.page.context}\n            tour={props.page.tour}\n            stop={stops[index]}\n          />\n        )}\n      </Grid>\n    </Grid>\n  );\n};\n","import React, { useState, useEffect } from \"react\";\nimport \"./styles/App.css\";\nimport { UploadTour } from \"./pages/UploadTour\";\nimport { CreateIndex } from \"./pages/CreateIndex\";\nimport { ViewTour } from \"./pages/ViewTour\";\nimport { Page } from \"./pageTypes\";\nimport { Index, Tour, isTour, parseTour, parseIndex } from \"./model\";\nimport { AppBar, Toolbar, Button, Icon } from \"@material-ui/core\";\n\nconst App: React.FC<{ page?: Page }> = props => {\n  const [page, setPage] = useState(\n    props.page || ({ kind: \"UploadTour\" } as Page)\n  );\n\n  function startOver() {\n    localStorage.clear();\n    setPage({ kind: \"UploadTour\" });\n  }\n\n  function getSavedTour(): Tour | null {\n    const tourString = localStorage.getItem(\"savedTour\");\n    if (!tourString) return null;\n    const tour = parseTour(tourString);\n    return isTour(tour) ? tour : null;\n  }\n\n  function getSavedIndex(): Index | null {\n    const indexString = localStorage.getItem(\"savedIndex\");\n    if (!indexString) return null;\n    const index = parseIndex(indexString);\n    return typeof index === \"string\" ? null : index;\n  }\n\n  useEffect(() => {\n    if (props.page) return; // don't overwrite hard-coded value\n    const tour = getSavedTour();\n    const index = getSavedIndex();\n    if (tour) {\n      if (index) {\n        setPage({\n          kind: \"ViewTour\",\n          tour,\n          context: { kind: \"ResolveWithIndex\", index }\n        });\n      } else {\n        setPage({ kind: \"CreateIndex\", tour });\n      }\n    }\n  }, [props.page]);\n\n  let main;\n  switch (page.kind) {\n    case \"UploadTour\":\n      main = <UploadTour page={page} route={setPage} />;\n      break;\n    case \"CreateIndex\":\n      main = <CreateIndex page={page} route={setPage} />;\n      break;\n    case \"ViewTour\":\n      main = <ViewTour page={page} route={setPage} />;\n      break;\n  }\n\n  return (\n    <div className=\"App\">\n      <AppBar position=\"static\">\n        <Toolbar>\n          {page.kind !== \"UploadTour\" && (\n            <Button onClick={startOver}>\n              <Icon style={{ marginRight: 20 }}>refresh</Icon>\n              Start Over\n            </Button>\n          )}\n        </Toolbar>\n      </AppBar>\n      {main}\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./styles/index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { createMuiTheme, MuiThemeProvider } from \"@material-ui/core/styles\";\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      light: \"#67daff\",\n      main: \"#03a9f4\",\n      dark: \"#007ac1\",\n      contrastText: \"#fff\"\n    },\n    secondary: {\n      light: \"#80e27e\",\n      main: \"#4caf50\",\n      dark: \"#087f23\",\n      contrastText: \"#000\"\n    }\n  }\n});\n\nReactDOM.render(\n  <MuiThemeProvider theme={theme}>\n    <App />\n  </MuiThemeProvider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}