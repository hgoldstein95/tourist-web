(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{256:function(e,t,a){e.exports=a(439)},261:function(e,t,a){},262:function(e,t,a){},439:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),o=a(66),i=a.n(o),l=(a(261),a(124)),c=(a(262),a(544)),s=a(250),u=a(545),m=a(553),p=a(539),d=a(542),g=a(543),f=a(537),h=Object(f.a)(function(e){return{bgErr:{backgroundColor:e.palette.error.dark},errIcon:{fontSize:20,opacity:.9,marginRight:10}}}),y=function(e){var t=h(e);return n.a.createElement(m.a,{open:e.show,anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:6e3},n.a.createElement(p.a,{message:n.a.createElement("span",null,n.a.createElement(d.a,{className:t.errIcon},"error"),e.message||"An Error Occurred"),action:[n.a.createElement(g.a,{key:"close",color:"inherit",onClick:e.hideError},n.a.createElement(d.a,null,"close"))],className:t.bgErr}))};function b(e){var t;try{t=JSON.parse(e)}catch(n){return"Failed to parse file as JSON."}var a,r="Could not parse file as a tour.";return"object"!=typeof t.repositories?r:(t.repositories=new Map(Object.entries(t.repositories)),(a=t).repositories instanceof Map&&"string"===typeof a.title&&"string"===typeof a.description&&Array.isArray(a.stops)&&a.stops.every(function(e){return function(e){return"string"===typeof e.body&&"number"===typeof e.line&&"string"===typeof e.relPath&&"string"===typeof e.repository&&"string"===typeof e.title}(e)})?t:r)}var E=function(e){var t=Object(r.useState)(null),a=Object(l.a)(t,2),o=a[0],i=a[1];return n.a.createElement("div",null,n.a.createElement(c.a,{container:!0,justify:"center",alignItems:"center",style:{height:"100vh"}},n.a.createElement(c.a,{item:!0,xs:7,style:{textAlign:"center"}},n.a.createElement(s.a,{variant:"h3",style:{marginBottom:20}},"Welcome to Tourist!"),n.a.createElement("p",null,"Tourist is a new approach to documentation that allows programmers to explain low-level technical details of a system while simultaneously providing the context of how those details fit into the broader architecture. It lets programmers document code in the same way that they would explain it in person: by walking the consumer step-by-step through the important parts of a codebase."),n.a.createElement(u.a,{style:{marginTop:80},color:"primary",variant:"outlined",component:"label"},"Upload a Tour",n.a.createElement("input",{type:"file",style:{display:"none"},onInput:function(t){var a=t.target.files[0],r=new FileReader;r.readAsText(a),r.onload=function(t){var a=b(t.target.result);"string"!=typeof a?e.route({kind:"CreateIndex",tour:a}):i(a)}}})))),n.a.createElement(y,{show:null!==o,hideError:function(){return i(null)},message:o||void 0}))},v=a(548),x=a(552),w=a(549),j=function(e){var t=e.repository.provider;return n.a.createElement(c.a,{item:!0,xs:12},n.a.createElement(c.a,{container:!0,alignItems:"flex-end"},n.a.createElement(c.a,{item:!0,xs:3},n.a.createElement(s.a,{variant:"h5"},e.repoName)),n.a.createElement(c.a,{item:!0,xs:2},n.a.createElement(v.a,{value:t,onChange:function(t){return a=t.target.value,e.repository.provider=a,void e.onChange(e.repository);var a}},n.a.createElement(x.a,{value:"github"},"GitHub"),n.a.createElement(x.a,{value:"gitlab"},"GitLab"))),n.a.createElement(c.a,{item:!0,xs:"gitlab"!==t?7:5},n.a.createElement(w.a,{style:{width:"100%"},value:e.repository.name,label:e.first&&"gitlab"!==t?"Repository Tag (e.g. noobmaster69/my-repo)":"Repository Tag",onChange:function(t){return a=t.target.value,e.repository.name=a,void e.onChange(e.repository);var a}})),"gitlab"===t&&n.a.createElement(c.a,{item:!0,xs:2},n.a.createElement(w.a,{style:{width:"100%",marginLeft:10},type:"number",value:"gitlab"===e.repository.provider?e.repository.project:0,label:"GitLab Project",onChange:function(t){return a=+t.target.value,void("gitlab"===e.repository.provider&&(e.repository.project=a,e.onChange(e.repository)));var a}}))))},k=function(e){var t=e.page.tour,a=Object(r.useState)(new Map(Array.from(t.repositories.keys()).map(function(e){return[e,{provider:"github",name:""}]}))),o=Object(l.a)(a,2),i=o[0],m=o[1],p=Object(r.useState)(null),d=Object(l.a)(p,2),g=d[0],f=d[1];return n.a.createElement("div",null,n.a.createElement(c.a,{container:!0,style:{height:"100vh"},justify:"center",alignItems:"center"},n.a.createElement(c.a,{item:!0,xs:12,md:6},n.a.createElement(c.a,{container:!0},n.a.createElement(c.a,{item:!0,xs:12,style:{marginBottom:30}},n.a.createElement(s.a,{variant:"h4"},t.title)),n.a.createElement(c.a,{item:!0,xs:12},n.a.createElement(c.a,{container:!0},Array.from(t.repositories.keys()).map(function(e,t){return n.a.createElement(j,{repoName:e,repository:i.get(e),onChange:function(t){return function(e,t){var a=new Map(i);a.set(e,t),m(a)}(e,t)},key:e,first:0===t})}))),n.a.createElement(c.a,{item:!0,xs:12,style:{textAlign:"right",marginTop:50}},n.a.createElement(u.a,{onClick:function(){Array.from(i.entries()).some(function(e){var t=Object(l.a)(e,2),a=(t[0],t[1]);return""===a.name||"gitlab"===a.provider&&!a.project})?f("You must set a mapping for every repository."):e.route({kind:"ViewTour",tour:e.page.tour,index:i})},color:"primary",variant:"outlined"},"Start Tour"))))),n.a.createElement(y,{show:null!==g,hideError:function(){return f(null)},message:g||void 0}))},O=a(547),L=a(246),C=a.n(L),T=a(247),A=a(248),I=a.n(A),N=Object(f.a)(function(e){return{focusLine:{borderTop:"1px solid black",borderBottom:"1px solid black"},focusLineDeco:{width:"5px !important",marginLeft:3,backgroundColor:e.palette.primary.main}}}),S=function(e){var t=N(),a=Object(r.useRef)(null);return Object(r.useEffect)(function(){if(a.current){var r=a.current.editor;if(r){var n=r.getModel();n&&(n.setValue(e.code),r.revealLineInCenter(e.focusLine),r.deltaDecorations([],[{range:{startLineNumber:e.focusLine,startColumn:0,endLineNumber:e.focusLine,endColumn:0},options:{isWholeLine:!0,className:t.focusLine,linesDecorationsClassName:t.focusLineDeco}}]))}}},[a,e,t]),n.a.createElement(I.a,{ref:a,height:"80vh",language:"typescript",options:{readOnly:!0,minimap:{enabled:!1}}})};var M=function(e){var t=function(e,t,a,r){switch(e.provider){case"github":return"https://github.com/"+e.name+"/blob/"+a+"/"+t+"#L"+r;case"gitlab":return"https://gitlab.com/"+e.name+"/blob/"+a+"/"+t+"#L"+r}}(e.repository,e.path,e.commit,e.line);return n.a.createElement(O.a,{href:t,style:{float:"right"}},"View on ","github"===e.repository.provider?"GitHub":"GitLab")},R=function(e){var t=e.stop,a=e.index.get(e.stop.repository),r=new T.Converter;r.setFlavor("github");var o=r.makeHtml(t.body);return n.a.createElement("div",null,n.a.createElement(s.a,{variant:"h3"},t.title),n.a.createElement("div",{dangerouslySetInnerHTML:{__html:o}}),a&&n.a.createElement(M,{repository:a,path:t.relPath,commit:e.tour.repositories.get(t.repository)||"master",line:t.line}))},B=function(e){var t=Object(r.useState)("Loading..."),a=Object(l.a)(t,2),o=a[0],i=a[1],c=e.index.get(e.stop.repository);return Object(r.useEffect)(function(){c?C.a.get(function(e,t,a){switch(e.provider){case"github":return"https://raw.githubusercontent.com/"+e.name+"/"+a+"/"+t;case"gitlab":return"https://gitlab.com/api/v4/projects/"+e.project+"/repository/files/"+t+"/raw?ref="+a}}(c,e.stop.relPath,e.tour.repositories.get(e.stop.repository)||"master")).then(function(e){i(e.data)}):i("Repository was not mapped in the index.")},[e.stop,e.tour,c]),n.a.createElement(S,{code:o,focusLine:e.stop.line})},D=function(e){return n.a.createElement(c.a,{container:!0},n.a.createElement(c.a,{item:!0,md:4,xs:12,style:{paddingRight:60}},n.a.createElement(R,{index:e.index,tour:e.tour,stop:e.stop})),n.a.createElement(c.a,{item:!0,md:8,xs:12},n.a.createElement(B,{index:e.index,tour:e.tour,stop:e.stop})))},G=function(e){return n.a.createElement(c.a,{container:!0},n.a.createElement(c.a,{item:!0,xs:12,style:{textAlign:"center"}},n.a.createElement(s.a,{variant:"h3"},e.tour.title)),n.a.createElement(c.a,{item:!0,xs:12,style:{textAlign:"center"}},n.a.createElement("p",{style:{marginTop:50}},e.tour.description)))},H=function(e){var t=e.page.tour.stops,a=Object(r.useState)(-1),o=Object(l.a)(a,2),i=o[0],s=o[1];var u=i<t.length-1,m=i>-1;return n.a.createElement(c.a,{container:!0,style:{paddingTop:20,paddingLeft:60,paddingRight:60}},n.a.createElement(c.a,{item:!0,xs:12,style:{marginBottom:20}},n.a.createElement(g.a,{onClick:function(){s(Math.max(-1,i-1))},disabled:!m},n.a.createElement(d.a,null,"arrow_back")),n.a.createElement(g.a,{onClick:function(){s(Math.min(t.length,i+1))},disabled:!u,style:{float:"right"}},n.a.createElement(d.a,null,"arrow_forward"))),n.a.createElement(c.a,{item:!0,xs:12},-1===i?n.a.createElement(G,{tour:e.page.tour}):n.a.createElement(D,{index:e.page.index,tour:e.page.tour,stop:t[i]})))},J=function(e){var t,a=Object(r.useState)(e.page||{kind:"UploadTour"}),o=Object(l.a)(a,2),i=o[0],c=o[1];switch(i.kind){case"UploadTour":t=n.a.createElement(E,{page:i,route:c});break;case"CreateIndex":t=n.a.createElement(k,{page:i,route:c});break;case"ViewTour":t=n.a.createElement(H,{page:i,route:c})}return n.a.createElement("div",{className:"App"},t)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=a(249),U=a(551),V=Object(P.a)({palette:{primary:{light:"#67daff",main:"#03a9f4",dark:"#007ac1",contrastText:"#fff"},secondary:{light:"#80e27e",main:"#4caf50",dark:"#087f23",contrastText:"#000"}}});i.a.render(n.a.createElement(U.a,{theme:V},n.a.createElement(J,{page:{kind:"UploadTour"}})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[256,2,3]]]);
//# sourceMappingURL=main.26c4f8c7.chunk.js.map