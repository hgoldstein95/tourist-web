(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{258:function(e,t,r){e.exports=r(441)},263:function(e,t,r){},264:function(e,t,r){},441:function(e,t,r){"use strict";r.r(t);var a=r(2),n=r.n(a),o=r(66),i=r.n(o),l=(r(263),r(102)),c=(r(264),r(545)),s=r(253),u=r(546),m=r(554),p=r(540),g=r(543),d=r(544),f=r(538),y=Object(f.a)(function(e){return{bgErr:{backgroundColor:e.palette.error.dark},errIcon:{fontSize:20,opacity:.9,marginRight:10}}}),h=function(e){var t=y(e);return n.a.createElement(m.a,{open:e.show,anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:6e3},n.a.createElement(p.a,{message:n.a.createElement("span",null,n.a.createElement(g.a,{className:t.errIcon},"error"),e.message||"An Error Occurred"),action:[n.a.createElement(d.a,{key:"close",color:"inherit",onClick:e.hideError},n.a.createElement(g.a,null,"close"))],className:t.bgErr}))},v=r(251);function b(e){return e.repositories instanceof Map&&"string"===typeof e.title&&"string"===typeof e.description&&Array.isArray(e.stops)&&e.stops.every(function(e){return function(e){return"string"===typeof e.body&&"number"===typeof e.line&&"string"===typeof e.relPath&&"string"===typeof e.repository&&"string"===typeof e.title}(e)})}function E(e){var t;try{t=JSON.parse(e)}catch(a){return"Failed to parse file as JSON."}var r="Could not parse file as a tour.";return"object"!=typeof t.repositories?r:(t.repositories=new Map(Object.entries(t.repositories)),b(t)?t:r)}var x=function(e){var t=Object(a.useState)(null),r=Object(l.a)(t,2),o=r[0],i=r[1];return n.a.createElement("div",null,n.a.createElement(c.a,{container:!0,justify:"center",alignItems:"center",style:{marginTop:"10%"}},n.a.createElement(c.a,{item:!0,xs:7,style:{textAlign:"center"}},n.a.createElement(s.a,{variant:"h3",style:{marginBottom:20}},"Welcome to Tourist!"),n.a.createElement("p",null,"Tourist is a new approach to documentation that allows programmers to explain low-level technical details of a system while simultaneously providing the context of how those details fit into the broader architecture. It lets programmers document code in the same way that they would explain it in person: by walking the consumer step-by-step through the important parts of a codebase."),n.a.createElement(u.a,{style:{marginTop:80},color:"primary",variant:"outlined",component:"label"},"Upload a Tour",n.a.createElement("input",{type:"file",style:{display:"none"},onInput:function(t){var r=t.target.files[0],a=new FileReader;a.readAsText(r),a.onload=function(t){var r=E(t.target.result);"string"!=typeof r?(localStorage.setItem("savedTour",function(e){var t={};return Array.from(e.repositories.entries()).forEach(function(e){var r=Object(l.a)(e,2),a=r[0],n=r[1];t[a]=n}),console.log(t),JSON.stringify(Object(v.a)({},e,{repositories:t}))}(r)),e.route({kind:"CreateIndex",tour:r})):i(r)}}})))),n.a.createElement(h,{show:null!==o,hideError:function(){return i(null)},message:o||void 0}))},w=r(551),j=r(555),O=r(552),k=function(e){var t=e.repository.provider;return n.a.createElement(c.a,{item:!0,xs:12},n.a.createElement(c.a,{container:!0,alignItems:"flex-end"},n.a.createElement(c.a,{item:!0,xs:3},n.a.createElement(s.a,{variant:"h5"},e.repoName)),n.a.createElement(c.a,{item:!0,xs:2},n.a.createElement(w.a,{value:t,onChange:function(t){return r=t.target.value,e.repository.provider=r,void e.onChange(e.repository);var r}},n.a.createElement(j.a,{value:"github"},"GitHub"),n.a.createElement(j.a,{value:"gitlab"},"GitLab"))),n.a.createElement(c.a,{item:!0,xs:"gitlab"!==t?7:5},n.a.createElement(O.a,{style:{width:"100%"},value:e.repository.name,label:e.first&&"gitlab"!==t?"Repository Tag (e.g. noobmaster69/my-repo)":"Repository Tag",onChange:function(t){return r=t.target.value,e.repository.name=r,void e.onChange(e.repository);var r}})),"gitlab"===t&&n.a.createElement(c.a,{item:!0,xs:2},n.a.createElement(O.a,{style:{width:"100%",marginLeft:10},type:"number",value:"gitlab"===e.repository.provider?e.repository.project:0,label:"GitLab Project",onChange:function(t){return r=+t.target.value,void("gitlab"===e.repository.provider&&(e.repository.project=r,e.onChange(e.repository)));var r}}))))},T=function(e){var t=e.page.tour,r=Object(a.useState)(new Map(Array.from(t.repositories.keys()).map(function(e){return[e,{provider:"github",name:""}]}))),o=Object(l.a)(r,2),i=o[0],m=o[1],p=Object(a.useState)(null),g=Object(l.a)(p,2),d=g[0],f=g[1];return n.a.createElement("div",null,n.a.createElement(c.a,{container:!0,style:{marginTop:"10%"},justify:"center",alignItems:"center"},n.a.createElement(c.a,{item:!0,xs:12,md:6},n.a.createElement(c.a,{container:!0},n.a.createElement(c.a,{item:!0,xs:12,style:{marginBottom:30}},n.a.createElement(s.a,{variant:"h4"},t.title)),n.a.createElement(c.a,{item:!0,xs:12},n.a.createElement(c.a,{container:!0},Array.from(t.repositories.keys()).map(function(e,t){return n.a.createElement(k,{repoName:e,repository:i.get(e),onChange:function(t){return function(e,t){var r=new Map(i);r.set(e,t),m(r)}(e,t)},key:e,first:0===t})}))),n.a.createElement(c.a,{item:!0,xs:12,style:{textAlign:"right",marginTop:50}},n.a.createElement(u.a,{onClick:function(){Array.from(i.entries()).some(function(e){var t=Object(l.a)(e,2),r=(t[0],t[1]);return""===r.name||"gitlab"===r.provider&&!r.project})?f("You must set a mapping for every repository."):(localStorage.setItem("savedIndex",function(e){var t={};return Array.from(e.entries()).forEach(function(e){var r=Object(l.a)(e,2),a=r[0],n=r[1];t[a]=n}),JSON.stringify(t)}(i)),e.route({kind:"ViewTour",tour:e.page.tour,index:i}))},color:"primary",variant:"outlined"},"Start Tour"))))),n.a.createElement(h,{show:null!==d,hideError:function(){return f(null)},message:d||void 0}))},C=r(548),S=r(247),L=r.n(S),I=r(248),N=r(249),A=r.n(N),M=Object(f.a)(function(e){return{focusLine:{borderTop:"1px solid black",borderBottom:"1px solid black"},focusLineDeco:{width:"5px !important",marginLeft:3,backgroundColor:e.palette.primary.main}}}),R=function(e){var t=M(),r=Object(a.useRef)(null);return Object(a.useEffect)(function(){if(r.current){var a=r.current.editor;if(a){var n=a.getModel();n&&(n.setValue(e.code),a.revealLineInCenter(e.focusLine),a.deltaDecorations([],[{range:{startLineNumber:e.focusLine,startColumn:0,endLineNumber:e.focusLine,endColumn:0},options:{isWholeLine:!0,className:t.focusLine,linesDecorationsClassName:t.focusLineDeco}}]))}}},[r,e,t]),n.a.createElement(A.a,{ref:r,height:"80vh",language:"typescript",options:{readOnly:!0,minimap:{enabled:!1}}})};var J=function(e){var t=function(e,t,r,a){switch(e.provider){case"github":return"https://github.com/"+e.name+"/blob/"+r+"/"+t+"#L"+a;case"gitlab":return"https://gitlab.com/"+e.name+"/blob/"+r+"/"+t+"#L"+a}}(e.repository,e.path,e.commit,e.line);return n.a.createElement(C.a,{href:t,style:{float:"right"}},"View on ","github"===e.repository.provider?"GitHub":"GitLab")},B=function(e){var t=e.stop,r=e.index.get(e.stop.repository),a=new I.Converter;a.setFlavor("github");var o=a.makeHtml(t.body);return n.a.createElement("div",null,n.a.createElement(s.a,{variant:"h3"},t.title),n.a.createElement("div",{dangerouslySetInnerHTML:{__html:o}}),r&&n.a.createElement(J,{repository:r,path:t.relPath,commit:e.tour.repositories.get(t.repository)||"master",line:t.line}))},D=function(e){var t=Object(a.useState)("Loading..."),r=Object(l.a)(t,2),o=r[0],i=r[1],c=e.index.get(e.stop.repository);return Object(a.useEffect)(function(){c?L.a.get(function(e,t,r){switch(e.provider){case"github":return"https://raw.githubusercontent.com/"+e.name+"/"+r+"/"+t;case"gitlab":return"https://gitlab.com/api/v4/projects/"+e.project+"/repository/files/"+t+"/raw?ref="+r}}(c,e.stop.relPath,e.tour.repositories.get(e.stop.repository)||"master")).then(function(e){i(e.data)}):i("Repository was not mapped in the index.")},[e.stop,e.tour,c]),n.a.createElement(R,{code:o,focusLine:e.stop.line})},G=function(e){return n.a.createElement(c.a,{container:!0},n.a.createElement(c.a,{item:!0,md:4,xs:12,style:{paddingRight:60}},n.a.createElement(B,{index:e.index,tour:e.tour,stop:e.stop})),n.a.createElement(c.a,{item:!0,md:8,xs:12},n.a.createElement(D,{index:e.index,tour:e.tour,stop:e.stop})))},H=function(e){return n.a.createElement(c.a,{container:!0},n.a.createElement(c.a,{item:!0,xs:12,style:{textAlign:"center"}},n.a.createElement(s.a,{variant:"h3"},e.tour.title)),n.a.createElement(c.a,{item:!0,xs:12,style:{textAlign:"center"}},n.a.createElement("p",{style:{marginTop:50}},e.tour.description)))},U=function(e){var t=e.page.tour.stops,r=Object(a.useState)(-1),o=Object(l.a)(r,2),i=o[0],s=o[1];function u(e){s(e),localStorage.setItem("stopNumber",e.toString())}var m=i<t.length-1,p=i>-1;return Object(a.useEffect)(function(){var e=localStorage.getItem("stopNumber");e&&s(+e)},[]),n.a.createElement(c.a,{container:!0,style:{paddingTop:20,paddingLeft:60,paddingRight:60}},n.a.createElement(c.a,{item:!0,xs:12,style:{marginBottom:20}},n.a.createElement(d.a,{onClick:function(){u(Math.max(-1,i-1))},disabled:!p},n.a.createElement(g.a,null,"arrow_back")),n.a.createElement(d.a,{onClick:function(){u(Math.min(t.length,i+1))},disabled:!m,style:{float:"right"}},n.a.createElement(g.a,null,"arrow_forward"))),n.a.createElement(c.a,{item:!0,xs:12},-1===i?n.a.createElement(H,{tour:e.page.tour}):n.a.createElement(G,{index:e.page.index,tour:e.page.tour,stop:t[i]})))},V=r(549),F=r(550),P=function(e){var t,r=Object(a.useState)(e.page||{kind:"UploadTour"}),o=Object(l.a)(r,2),i=o[0],c=o[1];function s(){var e=localStorage.getItem("savedIndex");if(!e)return null;var t=function(e){var t;try{t=JSON.parse(e)}catch(r){return"Failed to parse file as JSON."}return"object"!=typeof t?"Could not parse file as a tour.":new Map(Object.entries(t))}(e);return"string"===typeof t?null:t}switch(Object(a.useEffect)(function(){if(!e.page){var t=function(){var e=localStorage.getItem("savedTour");if(!e)return null;var t=E(e);return b(t)?t:null}(),r=s();t&&c(r?{kind:"ViewTour",tour:t,index:r}:{kind:"CreateIndex",tour:t})}},[e.page]),i.kind){case"UploadTour":t=n.a.createElement(x,{page:i,route:c});break;case"CreateIndex":t=n.a.createElement(T,{page:i,route:c});break;case"ViewTour":t=n.a.createElement(U,{page:i,route:c})}return n.a.createElement("div",{className:"App"},n.a.createElement(V.a,{position:"static"},n.a.createElement(F.a,null,"UploadTour"!==i.kind&&n.a.createElement(u.a,{onClick:function(){localStorage.clear(),c({kind:"UploadTour"})}},n.a.createElement(g.a,{style:{marginRight:20}},"refresh"),"Start Over"))),t)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=r(250),_=r(556),z=Object(W.a)({palette:{primary:{light:"#67daff",main:"#03a9f4",dark:"#007ac1",contrastText:"#fff"},secondary:{light:"#80e27e",main:"#4caf50",dark:"#087f23",contrastText:"#000"}}});i.a.render(n.a.createElement(_.a,{theme:z},n.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[258,2,3]]]);
//# sourceMappingURL=main.54ec93eb.chunk.js.map